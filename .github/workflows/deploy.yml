name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      # 1. –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–¥ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v3

      # 2. –í–Ω–µ–¥—Ä—è–µ–º —Å–µ–∫—Ä–µ—Ç –ø—Ä—è–º–æ –≤ index.html
      - name: Replace API Key in index.html ü§´
        run: |
          # –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Å –≤–∞—à–∏–º –≥–ª–∞–≤–Ω—ã–º —Ñ–∞–π–ª–æ–º index.html
          sed -i 's|%%GEMINI_API_KEY%%|${{ secrets.GEMINI_API_KEY }}|g' index.html
        
      # 3. –ü—É–±–ª–∏–∫—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
      - name: Deploy üöÄ
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: gh-pages
          folder: .
          clean: true # –≠—Ç–∞ –æ–ø—Ü–∏—è —É–¥–∞–ª–∏—Ç –≤—Å–µ —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –∏–∑ –≤–µ—Ç–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

